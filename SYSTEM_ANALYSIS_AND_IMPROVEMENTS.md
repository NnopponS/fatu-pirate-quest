# üè¥‚Äç‚ò†Ô∏è ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏£‡∏∞‡∏ö‡∏ö FATU Pirate Quest ‡πÅ‡∏•‡∏∞‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á

‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà: 28 ‡∏ï‡∏∏‡∏•‡∏≤‡∏Ñ‡∏° 2025

---

## üìä ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏£‡∏∞‡∏ö‡∏ö

### ‡∏£‡∏∞‡∏ö‡∏ö‡∏´‡∏•‡∏±‡∏Å (Frontend + Backend)
```
Frontend: React + TypeScript + Vite
Backend: Firebase Realtime Database + Supabase Functions
Authentication: Custom (localStorage + Firebase)
State Management: React Hooks + Context API
UI Framework: Tailwind CSS + shadcn/ui
```

### ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å
1. **Index** - ‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å/Landing Page
2. **Login/Signup** - ‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö
3. **Dashboard** - ‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
4. **Map** - ‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà + ‡∏™‡πÅ‡∏Å‡∏ô QR
5. **Checkin** - ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏¥‡∏ô
6. **Rewards** - ‡∏´‡∏°‡∏∏‡∏ô‡∏ß‡∏á‡∏•‡πâ‡∏≠‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•
7. **Profile** - ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß
8. **AdminDashboard** - ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Admin
9. **PrizeVerification** - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•
10. **FlappyBird** - ‡πÄ‡∏Å‡∏°‡∏°‡∏¥‡∏ô‡∏¥ (Easter Egg)

---

## ‚úÖ ‡∏à‡∏∏‡∏î‡πÅ‡∏Ç‡πá‡∏á‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô

### 1. UX/UI Design
- ‚ú® **Pirate Theme ‡∏™‡∏ß‡∏¢‡∏á‡∏≤‡∏°** - Design ‡∏™‡∏≠‡∏î‡∏Ñ‡∏•‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ö‡∏ò‡∏µ‡∏°‡πÇ‡∏à‡∏£‡∏™‡∏•‡∏±‡∏î
- üé® **Responsive Design** - ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏ó‡∏±‡πâ‡∏á Mobile ‡πÅ‡∏•‡∏∞ Desktop
- üé≠ **Interactive Characters** - Pirate Character ‡∏ä‡πà‡∏ß‡∏¢‡∏™‡∏£‡πâ‡∏≤‡∏á Engagement
- üí¨ **AI Chatbot** - ‡πÉ‡∏ä‡πâ Puter.js (‡∏ü‡∏£‡∏µ!) ‡∏ï‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ

### 2. Core Features
- ‚öì **QR Code System** - ‡∏™‡πÅ‡∏Å‡∏ô‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏¥‡∏ô‡πÅ‡∏•‡∏∞‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡πÑ‡∏î‡πâ
- üó∫Ô∏è **Location-based Checkin** - ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏¥‡∏ô‡∏ó‡∏∏‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà
- üéØ **Sub-Events** - ‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏¢‡πà‡∏≠‡∏¢‡πÉ‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà
- üé° **Spin Wheel** - ‡∏£‡∏∞‡∏ö‡∏ö‡∏´‡∏°‡∏∏‡∏ô‡∏ß‡∏á‡∏•‡πâ‡∏≠‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•
- üìä **Points System** - ‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ó‡∏µ‡πà‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô
- üëë **Admin Dashboard** - ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏î‡πâ‡∏™‡∏∞‡∏î‡∏ß‡∏Å

### 3. Security
- üîí **QR Code Signature** - ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô QR Code ‡∏õ‡∏•‡∏≠‡∏°
- üîê **Admin Authentication** - ‡∏£‡∏∞‡∏ö‡∏ö Admin ‡πÅ‡∏¢‡∏Å‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å User
- üõ°Ô∏è **Data Validation** - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡πà‡∏≠‡∏ô‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å

---

## üî• ‡∏à‡∏∏‡∏î‡∏ó‡∏µ‡πà‡∏Ñ‡∏ß‡∏£‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡πÄ‡∏£‡πà‡∏á‡∏î‡πà‡∏ß‡∏ô (Priority 1)

### 1. **Performance & Optimization**

#### üêõ ‡∏õ‡∏±‡∏ç‡∏´‡∏≤:
- ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ã‡πâ‡∏≥‡∏ã‡πâ‡∏≠‡∏ô‡∏´‡∏•‡∏≤‡∏¢‡∏Ñ‡∏£‡∏±‡πâ‡∏á (Dashboard, Map, Profile)
- ‡πÑ‡∏°‡πà‡∏°‡∏µ Caching ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡∏•‡∏∑‡∏≠‡∏á‡πÅ‡∏ö‡∏ô‡∏î‡πå‡∏ß‡∏¥‡∏ò
- Re-render ‡∏ö‡πà‡∏≠‡∏¢‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ

#### ‚úÖ ‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ:
```typescript
// ‡∏™‡∏£‡πâ‡∏≤‡∏á Global State Management ‡∏î‡πâ‡∏ß‡∏¢ React Query ‡∏´‡∏£‡∏∑‡∏≠ Zustand
// Example: src/stores/participantStore.ts

import { create } from 'zustand';

interface ParticipantState {
  points: number;
  checkins: number[];
  locations: Location[];
  loading: boolean;
  fetchData: () => Promise<void>;
}

export const useParticipantStore = create<ParticipantState>((set) => ({
  points: 0,
  checkins: [],
  locations: [],
  loading: false,
  fetchData: async () => {
    // Fetch once and cache
    set({ loading: true });
    const data = await getMapData(participantId);
    set({ ...data, loading: false });
  },
}));
```

**‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏ä‡∏ô‡πå:**
- ‡∏•‡∏î API calls ‡∏à‡∏≤‡∏Å 10+ ‡∏Ñ‡∏£‡∏±‡πâ‡∏á ‡πÄ‡∏´‡∏•‡∏∑‡∏≠ 1-2 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á
- ‡πÄ‡∏£‡πá‡∏ß‡∏Ç‡∏∂‡πâ‡∏ô 3-5 ‡πÄ‡∏ó‡πà‡∏≤
- ‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î Firebase quota

---

### 2. **Error Handling & User Feedback**

#### üêõ ‡∏õ‡∏±‡∏ç‡∏´‡∏≤:
- Error messages ‡∏ö‡∏≤‡∏á‡∏à‡∏∏‡∏î‡πÑ‡∏°‡πà‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô
- ‡πÑ‡∏°‡πà‡∏°‡∏µ Retry mechanism
- Offline mode ‡πÑ‡∏°‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô

#### ‚úÖ ‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ:
```typescript
// src/components/ErrorBoundary.tsx
import { Component, ReactNode } from 'react';

class ErrorBoundary extends Component {
  state = { hasError: false, error: null };

  static getDerivedStateFromError(error: Error) {
    return { hasError: true, error };
  }

  render() {
    if (this.state.hasError) {
      return (
        <PirateBackdrop>
          <div className="pirate-card text-center">
            <h2>‚ö†Ô∏è ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î</h2>
            <p>{this.state.error?.message}</p>
            <Button onClick={() => window.location.reload()}>
              ‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö
            </Button>
          </div>
        </PirateBackdrop>
      );
    }
    return this.props.children;
  }
}
```

**‡πÄ‡∏û‡∏¥‡πà‡∏° Retry Logic:**
```typescript
// src/utils/apiRetry.ts
export async function apiWithRetry<T>(
  fn: () => Promise<T>,
  maxRetries = 3,
  delay = 1000
): Promise<T> {
  for (let i = 0; i < maxRetries; i++) {
    try {
      return await fn();
    } catch (error) {
      if (i === maxRetries - 1) throw error;
      await new Promise(resolve => setTimeout(resolve, delay * (i + 1)));
    }
  }
  throw new Error('Max retries reached');
}
```

---

### 3. **Mobile Experience**

#### üêõ ‡∏õ‡∏±‡∏ç‡∏´‡∏≤:
- QR Scanner ‡∏ö‡∏ô iOS ‡∏¢‡∏±‡∏á‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤ (‡πÅ‡∏Å‡πâ‡πÅ‡∏•‡πâ‡∏ß‡∏ö‡∏≤‡∏á‡∏™‡πà‡∏ß‡∏ô)
- Touch gestures ‡πÑ‡∏°‡πà Smooth
- Keyboard ‡∏õ‡∏¥‡∏î‡∏ö‡∏±‡∏á input ‡∏ö‡∏≤‡∏á‡∏à‡∏∏‡∏î

#### ‚úÖ ‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ:
```typescript
// src/hooks/useKeyboardHeight.ts
import { useEffect, useState } from 'react';

export function useKeyboardHeight() {
  const [keyboardHeight, setKeyboardHeight] = useState(0);

  useEffect(() => {
    const handleResize = () => {
      if (window.visualViewport) {
        const newHeight = window.innerHeight - window.visualViewport.height;
        setKeyboardHeight(newHeight);
      }
    };

    window.visualViewport?.addEventListener('resize', handleResize);
    return () => {
      window.visualViewport?.removeEventListener('resize', handleResize);
    };
  }, []);

  return keyboardHeight;
}

// ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô:
function ChatInput() {
  const keyboardHeight = useKeyboardHeight();
  
  return (
    <div style={{ paddingBottom: keyboardHeight }}>
      <Input />
    </div>
  );
}
```

**‡πÄ‡∏û‡∏¥‡πà‡∏° Pull-to-Refresh:**
```typescript
// src/hooks/usePullToRefresh.ts
export function usePullToRefresh(onRefresh: () => Promise<void>) {
  useEffect(() => {
    let startY = 0;
    let currentY = 0;

    const handleTouchStart = (e: TouchEvent) => {
      if (window.scrollY === 0) {
        startY = e.touches[0].clientY;
      }
    };

    const handleTouchMove = (e: TouchEvent) => {
      if (window.scrollY === 0) {
        currentY = e.touches[0].clientY;
        if (currentY - startY > 100) {
          onRefresh();
        }
      }
    };

    document.addEventListener('touchstart', handleTouchStart);
    document.addEventListener('touchmove', handleTouchMove);

    return () => {
      document.removeEventListener('touchstart', handleTouchStart);
      document.removeEventListener('touchmove', handleTouchMove);
    };
  }, [onRefresh]);
}
```

---

## üí° ‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏µ‡πà‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥ (Priority 2)

### 1. **Leaderboard (‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏ô‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô)**
‡πÅ‡∏™‡∏î‡∏á‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î

```typescript
// src/pages/Leaderboard.tsx
export default function Leaderboard() {
  const [leaders, setLeaders] = useState<Participant[]>([]);

  useEffect(() => {
    async function loadLeaderboard() {
      const data = await firebaseDb.get<Record<string, Participant>>('participants');
      const sorted = Object.values(data || {})
        .sort((a, b) => b.points - a.points)
        .slice(0, 10); // Top 10
      setLeaders(sorted);
    }
    loadLeaderboard();
  }, []);

  return (
    <PirateBackdrop>
      <div className="pirate-card">
        <h1 className="text-3xl font-bold mb-6">üèÜ ‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏ô‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</h1>
        
        <div className="space-y-2">
          {leaders.map((leader, index) => (
            <div
              key={leader.id}
              className={`flex items-center gap-4 p-4 rounded-lg ${
                index === 0
                  ? 'bg-yellow-100 border-2 border-yellow-500'
                  : index === 1
                  ? 'bg-gray-100 border-2 border-gray-400'
                  : index === 2
                  ? 'bg-orange-100 border-2 border-orange-400'
                  : 'bg-white border'
              }`}
            >
              <div className="text-2xl font-bold w-12 text-center">
                {index + 1}
              </div>
              <div className="flex-1">
                <p className="font-bold">{leader.first_name} {leader.last_name}</p>
                <p className="text-sm text-gray-600">{leader.school}</p>
              </div>
              <div className="text-right">
                <p className="text-2xl font-bold text-primary">{leader.points}</p>
                <p className="text-xs text-gray-500">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</p>
              </div>
            </div>
          ))}
        </div>
      </div>
    </PirateBackdrop>
  );
}
```

**‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏ä‡∏ô‡πå:**
- ‡∏™‡∏£‡πâ‡∏≤‡∏á Engagement ‡πÅ‡∏•‡∏∞ Competition
- ‡∏Å‡∏£‡∏∞‡∏ï‡∏∏‡πâ‡∏ô‡πÉ‡∏´‡πâ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏™‡∏∞‡∏™‡∏°‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏°‡∏≤‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô

---

### 2. **Achievement Badges (‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•)**
‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ó‡∏≥‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à‡∏ï‡πà‡∏≤‡∏á‡πÜ

```typescript
// src/types/achievements.ts
export interface Achievement {
  id: string;
  name: string;
  description: string;
  icon: string;
  requirement: (participant: Participant) => boolean;
  points: number;
}

export const ACHIEVEMENTS: Achievement[] = [
  {
    id: 'first_checkin',
    name: '‡∏Å‡πâ‡∏≤‡∏ß‡πÅ‡∏£‡∏Å‡πÅ‡∏´‡πà‡∏á‡∏Å‡∏≤‡∏£‡∏ú‡∏à‡∏ç‡∏†‡∏±‡∏¢',
    description: '‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏¥‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å',
    icon: '‚öì',
    requirement: (p) => p.checkins.length >= 1,
    points: 10,
  },
  {
    id: 'complete_all',
    name: '‡∏ô‡∏±‡∏Å‡∏™‡∏≥‡∏£‡∏ß‡∏à‡∏ï‡∏±‡∏ß‡∏à‡∏£‡∏¥‡∏á',
    description: '‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏¥‡∏ô‡∏Ñ‡∏£‡∏ö‡∏ó‡∏∏‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà',
    icon: 'üè¥‚Äç‚ò†Ô∏è',
    requirement: (p) => p.checkins.length === p.totalLocations,
    points: 100,
  },
  {
    id: 'early_bird',
    name: '‡∏ô‡∏Å‡∏ï‡∏±‡∏ß‡πÅ‡∏£‡∏Å',
    description: '‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏¥‡∏ô‡∏Å‡πà‡∏≠‡∏ô 10:00 ‡∏ô.',
    icon: 'üåÖ',
    requirement: (p) => {
      const firstCheckin = p.checkinsData[0];
      if (!firstCheckin) return false;
      const hour = new Date(firstCheckin.created_at).getHours();
      return hour < 10;
    },
    points: 20,
  },
  {
    id: 'social_butterfly',
    name: '‡∏ô‡∏±‡∏Å‡∏™‡∏±‡∏á‡∏™‡∏£‡∏£‡∏Ñ‡πå',
    description: '‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏Ñ‡∏£‡∏ö 5 ‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°',
    icon: 'ü¶ã',
    requirement: (p) => p.subEventCheckins.length >= 5,
    points: 50,
  },
  {
    id: 'speed_runner',
    name: '‡∏ô‡∏±‡∏Å‡∏ß‡∏¥‡πà‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß',
    description: '‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏¥‡∏ô‡∏Ñ‡∏£‡∏ö‡∏ó‡∏∏‡∏Å‡∏ó‡∏µ‡πà‡∏†‡∏≤‡∏¢‡πÉ‡∏ô 2 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á',
    icon: '‚ö°',
    requirement: (p) => {
      if (p.checkinsData.length < p.totalLocations) return false;
      const first = new Date(p.checkinsData[0].created_at);
      const last = new Date(p.checkinsData[p.checkinsData.length - 1].created_at);
      const hoursDiff = (last.getTime() - first.getTime()) / (1000 * 60 * 60);
      return hoursDiff <= 2;
    },
    points: 150,
  },
];

// Component
export function AchievementsList({ participant }: { participant: Participant }) {
  const unlockedAchievements = ACHIEVEMENTS.filter((a) => a.requirement(participant));

  return (
    <div className="grid grid-cols-2 md:grid-cols-3 gap-4">
      {ACHIEVEMENTS.map((achievement) => {
        const unlocked = unlockedAchievements.includes(achievement);
        return (
          <div
            key={achievement.id}
            className={`p-4 rounded-lg border-2 ${
              unlocked
                ? 'bg-yellow-50 border-yellow-500'
                : 'bg-gray-100 border-gray-300 opacity-50'
            }`}
          >
            <div className="text-4xl mb-2 filter" style={{ filter: unlocked ? 'none' : 'grayscale(1)' }}>
              {achievement.icon}
            </div>
            <h3 className="font-bold text-sm">{achievement.name}</h3>
            <p className="text-xs text-gray-600">{achievement.description}</p>
            {unlocked && (
              <p className="text-xs text-yellow-700 mt-2">+{achievement.points} ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</p>
            )}
          </div>
        );
      })}
    </div>
  );
}
```

**‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏ä‡∏ô‡πå:**
- Gamification ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏ô‡∏∏‡∏Å
- ‡∏Å‡∏£‡∏∞‡∏ï‡∏∏‡πâ‡∏ô‡πÉ‡∏´‡πâ‡∏ó‡∏≥‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏´‡∏•‡∏≤‡∏Å‡∏´‡∏•‡∏≤‡∏¢

---

### 3. **Real-time Notifications (‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô)**
‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡πÉ‡∏´‡∏°‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏Å‡∏•‡πâ‡∏ñ‡∏∂‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà

```typescript
// src/hooks/useGeolocation.ts
import { useEffect, useState } from 'react';

interface GeolocationState {
  latitude: number | null;
  longitude: number | null;
  error: string | null;
}

export function useGeolocation() {
  const [state, setState] = useState<GeolocationState>({
    latitude: null,
    longitude: null,
    error: null,
  });

  useEffect(() => {
    if (!navigator.geolocation) {
      setState((s) => ({ ...s, error: 'Geolocation not supported' }));
      return;
    }

    const watchId = navigator.geolocation.watchPosition(
      (position) => {
        setState({
          latitude: position.coords.latitude,
          longitude: position.coords.longitude,
          error: null,
        });
      },
      (error) => {
        setState((s) => ({ ...s, error: error.message }));
      },
      {
        enableHighAccuracy: true,
        maximumAge: 10000,
        timeout: 5000,
      }
    );

    return () => {
      navigator.geolocation.clearWatch(watchId);
    };
  }, []);

  return state;
}

// src/components/LocationProximityNotifier.tsx
export function LocationProximityNotifier() {
  const { latitude, longitude } = useGeolocation();
  const { locations, checkins } = useParticipantStore();
  const { toast } = useToast();
  const [notifiedLocations, setNotifiedLocations] = useState<Set<number>>(new Set());

  useEffect(() => {
    if (!latitude || !longitude) return;

    locations.forEach((location) => {
      // Skip if already checked in or already notified
      if (checkins.includes(location.id) || notifiedLocations.has(location.id)) {
        return;
      }

      // Calculate distance (Haversine formula)
      const distance = calculateDistance(
        latitude,
        longitude,
        location.lat,
        location.lng
      );

      // Notify if within 100 meters
      if (distance < 0.1) {
        toast({
          title: `üè¥‚Äç‚ò†Ô∏è ‡πÉ‡∏Å‡∏•‡πâ‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏•‡πâ‡∏ß!`,
          description: `‡∏ó‡πà‡∏≤‡∏ô‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏Å‡∏•‡πâ ${location.name} ‡∏™‡πÅ‡∏Å‡∏ô QR ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏¥‡∏ô!`,
        });
        setNotifiedLocations((prev) => new Set(prev).add(location.id));
      }
    });
  }, [latitude, longitude, locations, checkins, toast, notifiedLocations]);

  return null;
}

function calculateDistance(lat1: number, lon1: number, lat2: number, lon2: number): number {
  const R = 6371; // Radius of Earth in km
  const dLat = ((lat2 - lat1) * Math.PI) / 180;
  const dLon = ((lon2 - lon1) * Math.PI) / 180;
  const a =
    Math.sin(dLat / 2) * Math.sin(dLat / 2) +
    Math.cos((lat1 * Math.PI) / 180) *
      Math.cos((lat2 * Math.PI) / 180) *
      Math.sin(dLon / 2) *
      Math.sin(dLon / 2);
  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
  return R * c;
}
```

**‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏ä‡∏ô‡πå:**
- ‡∏ä‡πà‡∏ß‡∏¢‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÑ‡∏°‡πà‡∏û‡∏•‡∏≤‡∏î‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà
- ‡πÄ‡∏û‡∏¥‡πà‡∏° UX ‡πÉ‡∏´‡πâ‡∏î‡∏µ‡∏Ç‡∏∂‡πâ‡∏ô

---

### 4. **Social Sharing (‡πÅ‡∏ä‡∏£‡πå Social)**
‡πÅ‡∏ä‡∏£‡πå‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏¥‡∏ô/‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡πÑ‡∏õ Social Media

```typescript
// src/components/ShareButton.tsx
import { Share2 } from 'lucide-react';
import { Button } from '@/components/ui/button';

interface ShareButtonProps {
  title: string;
  text: string;
  url?: string;
}

export function ShareButton({ title, text, url }: ShareButtonProps) {
  const handleShare = async () => {
    const shareData = {
      title,
      text,
      url: url || window.location.href,
    };

    try {
      // Use Web Share API if available (Mobile)
      if (navigator.share) {
        await navigator.share(shareData);
      } else {
        // Fallback: Copy to clipboard
        const shareText = `${title}\n${text}\n${shareData.url}`;
        await navigator.clipboard.writeText(shareText);
        toast({
          title: '‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß!',
          description: '‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏Ñ‡∏•‡∏¥‡∏õ‡∏ö‡∏≠‡∏£‡πå‡∏î‡πÅ‡∏•‡πâ‡∏ß',
        });
      }
    } catch (error) {
      console.error('Share failed:', error);
    }
  };

  return (
    <Button onClick={handleShare} variant="outline" size="sm" className="gap-2">
      <Share2 className="h-4 w-4" />
      ‡πÅ‡∏ä‡∏£‡πå
    </Button>
  );
}

// ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô:
<ShareButton
  title="FATU Pirate Quest"
  text={`‡∏â‡∏±‡∏ô‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏• ${prize} ‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏´‡∏°‡∏∏‡∏ô‡∏ß‡∏á‡∏•‡πâ‡∏≠! üè¥‚Äç‚ò†Ô∏è`}
  url="https://fatu-pirate-quest.lovable.app"
/>
```

---

### 5. **Photo Upload at Checkin (‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û)**
‡πÉ‡∏´‡πâ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏¥‡∏ô

```typescript
// src/components/PhotoUploader.tsx
import { useState } from 'react';
import { Camera } from 'lucide-react';
import { Button } from '@/components/ui/button';

export function PhotoUploader({ locationId, onUpload }: { 
  locationId: number;
  onUpload: (photoUrl: string) => void;
}) {
  const [uploading, setUploading] = useState(false);

  const handleCapture = async (e: React.ChangeEvent<HTMLInputElement>) => {
    const file = e.target.files?.[0];
    if (!file) return;

    setUploading(true);

    try {
      // Upload to Firebase Storage ‡∏´‡∏£‡∏∑‡∏≠ Supabase Storage
      const formData = new FormData();
      formData.append('file', file);
      formData.append('location_id', String(locationId));

      const response = await fetch('/api/upload-photo', {
        method: 'POST',
        body: formData,
      });

      const { url } = await response.json();
      onUpload(url);

      toast({
        title: '‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!',
        description: '‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ñ‡∏π‡∏Å‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏•‡πâ‡∏ß',
      });
    } catch (error) {
      toast({
        title: '‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à',
        description: '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á',
        variant: 'destructive',
      });
    } finally {
      setUploading(false);
    }
  };

  return (
    <div>
      <input
        type="file"
        accept="image/*"
        capture="environment"
        onChange={handleCapture}
        className="hidden"
        id="photo-input"
      />
      <label htmlFor="photo-input">
        <Button asChild disabled={uploading}>
          <span className="gap-2">
            <Camera className="h-4 w-4" />
            {uploading ? '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î...' : '‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ'}
          </span>
        </Button>
      </label>
    </div>
  );
}
```

**‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏ä‡∏ô‡πå:**
- ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏ô‡∏∏‡∏Å
- ‡πÉ‡∏ä‡πâ‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏á‡∏≤‡∏ô
- ‡∏™‡∏£‡πâ‡∏≤‡∏á User-generated content

---

### 6. **Quest/Challenge System (‡∏£‡∏∞‡∏ö‡∏ö‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à)**
‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à‡∏û‡∏¥‡πÄ‡∏®‡∏©‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô

```typescript
// src/types/quests.ts
export interface Quest {
  id: string;
  name: string;
  description: string;
  icon: string;
  requirement: (participant: Participant) => boolean;
  reward: number;
  expiresAt: Date;
}

// Daily Quests
export const DAILY_QUESTS: Quest[] = [
  {
    id: 'daily_checkin_3',
    name: '‡∏ô‡∏±‡∏Å‡∏™‡∏≥‡∏£‡∏ß‡∏à‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô',
    description: '‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏¥‡∏ô 3 ‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ',
    icon: 'üìç',
    requirement: (p) => {
      const today = new Date().toDateString();
      const todayCheckins = p.checkinsData.filter(
        (c) => new Date(c.created_at).toDateString() === today
      );
      return todayCheckins.length >= 3;
    },
    reward: 50,
    expiresAt: new Date(new Date().setHours(23, 59, 59)),
  },
  {
    id: 'daily_subevent_2',
    name: '‡∏ô‡∏±‡∏Å‡∏™‡∏±‡∏á‡∏™‡∏£‡∏£‡∏Ñ‡πå‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô',
    description: '‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏° 2 ‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ',
    icon: 'üéâ',
    requirement: (p) => {
      const today = new Date().toDateString();
      const todaySubEvents = p.subEventCheckins.filter(
        (c) => new Date(c.created_at).toDateString() === today
      );
      return todaySubEvents.length >= 2;
    },
    reward: 30,
    expiresAt: new Date(new Date().setHours(23, 59, 59)),
  },
];

// Component
export function QuestsPanel() {
  const participant = useParticipantStore();
  const [completedQuests, setCompletedQuests] = useState<string[]>([]);

  const claimReward = async (quest: Quest) => {
    if (!quest.requirement(participant)) return;
    if (completedQuests.includes(quest.id)) return;

    // Award points
    await adjustPoints(participant.id, quest.reward);
    setCompletedQuests([...completedQuests, quest.id]);

    toast({
      title: 'üéâ ‡∏ó‡∏≥‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!',
      description: `‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö +${quest.reward} ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô`,
    });
  };

  return (
    <div className="space-y-4">
      <h2 className="text-2xl font-bold">üó∫Ô∏è ‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô</h2>
      
      {DAILY_QUESTS.map((quest) => {
        const completed = quest.requirement(participant);
        const claimed = completedQuests.includes(quest.id);
        
        return (
          <div
            key={quest.id}
            className={`p-4 rounded-lg border-2 ${
              completed ? 'bg-green-50 border-green-500' : 'bg-white border-gray-300'
            }`}
          >
            <div className="flex items-start justify-between">
              <div className="flex-1">
                <div className="flex items-center gap-2 mb-2">
                  <span className="text-2xl">{quest.icon}</span>
                  <h3 className="font-bold">{quest.name}</h3>
                </div>
                <p className="text-sm text-gray-600">{quest.description}</p>
                <p className="text-xs text-gray-500 mt-2">
                  ‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•: +{quest.reward} ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
                </p>
              </div>
              
              {completed && !claimed && (
                <Button onClick={() => claimReward(quest)} size="sm">
                  ‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•
                </Button>
              )}
              {claimed && (
                <div className="text-green-600 font-semibold text-sm">
                  ‚úì ‡∏£‡∏±‡∏ö‡πÅ‡∏•‡πâ‡∏ß
                </div>
              )}
            </div>
          </div>
        );
      })}
    </div>
  );
}
```

---

## üîß ‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏ó‡∏≤‡∏á‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ (Priority 3)

### 1. **Database Optimization**

```typescript
// ‡πÉ‡∏ä‡πâ Index ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Query ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏ö‡πà‡∏≠‡∏¢
// Firebase Realtime Database Rules:
{
  "rules": {
    "participants": {
      ".indexOn": ["points", "created_at"]
    },
    "checkins": {
      ".indexOn": ["location_id", "created_at"]
    }
  }
}
```

### 2. **Code Splitting**

```typescript
// src/App.tsx - Lazy load pages
import { lazy, Suspense } from 'react';

const Dashboard = lazy(() => import('./pages/Dashboard'));
const Map = lazy(() => import('./pages/Map'));
const Rewards = lazy(() => import('./pages/Rewards'));

function App() {
  return (
    <Suspense fallback={<LoadingSpinner />}>
      <Routes>
        <Route path="/dashboard" element={<Dashboard />} />
        <Route path="/map" element={<Map />} />
        <Route path="/rewards" element={<Rewards />} />
      </Routes>
    </Suspense>
  );
}
```

### 3. **Service Worker (PWA)**

```typescript
// public/sw.js
self.addEventListener('install', (event) => {
  event.waitUntil(
    caches.open('fatu-v1').then((cache) => {
      return cache.addAll([
        '/',
        '/index.html',
        '/assets/index.js',
        '/assets/index.css',
      ]);
    })
  );
});

self.addEventListener('fetch', (event) => {
  event.respondWith(
    caches.match(event.request).then((response) => {
      return response || fetch(event.request);
    })
  );
});
```

**manifest.json:**
```json
{
  "name": "FATU Pirate Quest",
  "short_name": "FATU Quest",
  "description": "Open House 2025 Treasure Hunt",
  "start_url": "/",
  "display": "standalone",
  "background_color": "#ffffff",
  "theme_color": "#8B4513",
  "icons": [
    {
      "src": "/icon-192.png",
      "sizes": "192x192",
      "type": "image/png"
    },
    {
      "src": "/icon-512.png",
      "sizes": "512x512",
      "type": "image/png"
    }
  ]
}
```

**‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏ä‡∏ô‡πå:**
- ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÅ‡∏ö‡∏ö Offline ‡πÑ‡∏î‡πâ
- ‡πÄ‡∏£‡πá‡∏ß‡∏Ç‡∏∂‡πâ‡∏ô‡∏°‡∏≤‡∏Å (‡πÇ‡∏´‡∏•‡∏î‡∏à‡∏≤‡∏Å cache)
- Install ‡πÄ‡∏õ‡πá‡∏ô App ‡πÑ‡∏î‡πâ

---

### 4. **Analytics & Tracking**

```typescript
// src/utils/analytics.ts
export function trackEvent(eventName: string, params?: Record<string, any>) {
  // Google Analytics 4
  if (typeof gtag !== 'undefined') {
    gtag('event', eventName, params);
  }

  // Facebook Pixel
  if (typeof fbq !== 'undefined') {
    fbq('track', eventName, params);
  }

  console.log('[Analytics]', eventName, params);
}

// ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô:
trackEvent('checkin', {
  location_id: 1,
  location_name: '‡∏ó‡πà‡∏≤‡πÄ‡∏£‡∏∑‡∏≠ A',
  points_earned: 100,
});

trackEvent('spin_wheel', {
  prize: '‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏¢‡∏∑‡∏î',
});

trackEvent('achievement_unlocked', {
  achievement_id: 'complete_all',
  achievement_name: '‡∏ô‡∏±‡∏Å‡∏™‡∏≥‡∏£‡∏ß‡∏à‡∏ï‡∏±‡∏ß‡∏à‡∏£‡∏¥‡∏á',
});
```

---

## üì± Admin Dashboard Improvements

### 1. **Real-time Dashboard**
‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏ö‡∏ö Real-time

```typescript
// src/pages/AdminDashboard.tsx
import { useEffect, useState } from 'react';
import { firebaseDb } from '@/integrations/firebase/database';

export function RealTimeDashboard() {
  const [stats, setStats] = useState({
    totalParticipants: 0,
    totalCheckins: 0,
    totalSpins: 0,
    onlineUsers: 0,
  });

  useEffect(() => {
    // Listen to real-time changes
    const unsubscribe = firebaseDb.onValue('participants', (data) => {
      const participants = Object.values(data || {});
      
      const totalCheckins = participants.reduce((sum, p) => {
        return sum + (p.checkins?.length || 0);
      }, 0);

      setStats({
        totalParticipants: participants.length,
        totalCheckins,
        totalSpins: participants.filter((p) => p.hasSpun).length,
        onlineUsers: participants.filter((p) => {
          // Consider online if last activity < 5 minutes ago
          const lastActivity = new Date(p.last_activity || 0);
          const now = new Date();
          return (now.getTime() - lastActivity.getTime()) < 5 * 60 * 1000;
        }).length,
      });
    });

    return () => unsubscribe();
  }, []);

  return (
    <div className="grid grid-cols-4 gap-4">
      <StatCard
        title="‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°"
        value={stats.totalParticipants}
        icon="üë•"
      />
      <StatCard
        title="‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏¥‡∏ô"
        value={stats.totalCheckins}
        icon="üìç"
      />
      <StatCard
        title="‡∏´‡∏°‡∏∏‡∏ô‡∏ß‡∏á‡∏•‡πâ‡∏≠"
        value={stats.totalSpins}
        icon="üé°"
      />
      <StatCard
        title="‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå"
        value={stats.onlineUsers}
        icon="üü¢"
        highlight
      />
    </div>
  );
}
```

### 2. **Export Data with Filters**
Export ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏≤‡∏°‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á

```typescript
// src/utils/exportData.ts
import * as XLSX from 'xlsx';

export function exportFilteredData(
  participants: Participant[],
  filters: {
    school?: string;
    minPoints?: number;
    hasSpun?: boolean;
    dateRange?: { start: Date; end: Date };
  }
) {
  // Filter data
  let filtered = participants;

  if (filters.school) {
    filtered = filtered.filter((p) => p.school === filters.school);
  }

  if (filters.minPoints !== undefined) {
    filtered = filtered.filter((p) => p.points >= filters.minPoints);
  }

  if (filters.hasSpun !== undefined) {
    filtered = filtered.filter((p) => p.hasSpun === filters.hasSpun);
  }

  if (filters.dateRange) {
    filtered = filtered.filter((p) => {
      const createdAt = new Date(p.created_at);
      return (
        createdAt >= filters.dateRange!.start &&
        createdAt <= filters.dateRange!.end
      );
    });
  }

  // Create Excel
  const worksheet = XLSX.utils.json_to_sheet(filtered);
  const workbook = XLSX.utils.book_new();
  XLSX.utils.book_append_sheet(workbook, worksheet, 'Participants');
  XLSX.writeFile(workbook, `participants_${new Date().toISOString()}.xlsx`);
}
```

---

## üé® UI/UX Improvements

### 1. **Dark Mode**
‡πÄ‡∏û‡∏¥‡πà‡∏° Dark Mode

```typescript
// src/contexts/ThemeContext.tsx
import { createContext, useContext, useEffect, useState } from 'react';

const ThemeContext = createContext({
  theme: 'light',
  toggleTheme: () => {},
});

export function ThemeProvider({ children }: { children: React.ReactNode }) {
  const [theme, setTheme] = useState<'light' | 'dark'>('light');

  useEffect(() => {
    const savedTheme = localStorage.getItem('theme') as 'light' | 'dark';
    if (savedTheme) {
      setTheme(savedTheme);
      document.documentElement.classList.toggle('dark', savedTheme === 'dark');
    }
  }, []);

  const toggleTheme = () => {
    const newTheme = theme === 'light' ? 'dark' : 'light';
    setTheme(newTheme);
    localStorage.setItem('theme', newTheme);
    document.documentElement.classList.toggle('dark', newTheme === 'dark');
  };

  return (
    <ThemeContext.Provider value={{ theme, toggleTheme }}>
      {children}
    </ThemeContext.Provider>
  );
}

export const useTheme = () => useContext(ThemeContext);
```

### 2. **Skeleton Loading**
Loading state ‡∏ó‡∏µ‡πà‡∏™‡∏ß‡∏¢‡∏á‡∏≤‡∏°

```typescript
// src/components/DashboardSkeleton.tsx
export function DashboardSkeleton() {
  return (
    <div className="space-y-6 animate-pulse">
      <div className="h-32 bg-gray-200 rounded-lg" />
      <div className="grid grid-cols-3 gap-4">
        <div className="h-24 bg-gray-200 rounded-lg" />
        <div className="h-24 bg-gray-200 rounded-lg" />
        <div className="h-24 bg-gray-200 rounded-lg" />
      </div>
      <div className="h-64 bg-gray-200 rounded-lg" />
    </div>
  );
}

// ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô:
{loading ? <DashboardSkeleton /> : <Dashboard />}
```

---

## üöÄ Performance Metrics to Track

```typescript
// src/utils/performanceMonitor.ts
export function trackPerformance() {
  // Page Load Time
  window.addEventListener('load', () => {
    const perfData = performance.timing;
    const pageLoadTime = perfData.loadEventEnd - perfData.navigationStart;
    
    console.log('[Performance] Page Load Time:', pageLoadTime, 'ms');
    
    trackEvent('performance', {
      metric: 'page_load',
      value: pageLoadTime,
    });
  });

  // First Contentful Paint
  if ('PerformanceObserver' in window) {
    const observer = new PerformanceObserver((list) => {
      for (const entry of list.getEntries()) {
        if (entry.name === 'first-contentful-paint') {
          console.log('[Performance] FCP:', entry.startTime, 'ms');
          
          trackEvent('performance', {
            metric: 'fcp',
            value: entry.startTime,
          });
        }
      }
    });

    observer.observe({ entryTypes: ['paint'] });
  }
}
```

---

## üìã Summary & Priority Roadmap

### üî¥ High Priority (‡∏ó‡∏≥‡∏ó‡∏±‡∏ô‡∏ó‡∏µ)
1. ‚úÖ **QR Scanner in Dashboard** - ‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß!
2. ‚ö†Ô∏è **Performance Optimization** - ‡πÉ‡∏ä‡πâ State Management (Zustand/React Query)
3. ‚ö†Ô∏è **Error Handling** - ‡πÄ‡∏û‡∏¥‡πà‡∏° ErrorBoundary ‡πÅ‡∏•‡∏∞ Retry Logic
4. ‚ö†Ô∏è **Mobile iOS Fixes** - ‡πÅ‡∏Å‡πâ keyboard, camera issues

### üü° Medium Priority (‡∏Ñ‡∏ß‡∏£‡∏ó‡∏≥)
5. üèÜ **Leaderboard** - ‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏ô‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
6. üéñÔ∏è **Achievement System** - ‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•
7. üìç **Location Notifications** - ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÉ‡∏Å‡∏•‡πâ‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà
8. üì± **PWA** - Install ‡πÄ‡∏õ‡πá‡∏ô App ‡πÑ‡∏î‡πâ

### üü¢ Low Priority (‡∏ó‡∏≥‡πÑ‡∏î‡πâ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡πÄ‡∏ß‡∏•‡∏≤)
9. üåô **Dark Mode**
10. üì∏ **Photo Upload**
11. üéØ **Quest System**
12. üìä **Advanced Analytics**

---

## ‚ú® ‡∏Ç‡πâ‡∏≠‡∏™‡∏£‡∏∏‡∏õ

‡∏£‡∏∞‡∏ö‡∏ö FATU Pirate Quest ‡∏°‡∏µ Foundation ‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏°‡∏≤‡∏Å ‡∏°‡∏µ‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô ‡πÅ‡∏ï‡πà‡∏¢‡∏±‡∏á‡∏°‡∏µ‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡πÑ‡∏î‡πâ‡∏≠‡∏µ‡∏Å‡∏°‡∏≤‡∏Å ‡πÇ‡∏î‡∏¢‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏î‡πâ‡∏≤‡∏ô **Performance**, **UX**, ‡πÅ‡∏•‡∏∞ **Gamification**

‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏ó‡∏µ‡πà‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏à‡∏∞‡∏ä‡πà‡∏ß‡∏¢:
- ‚ö° ‡πÄ‡∏£‡πá‡∏ß‡∏Ç‡∏∂‡πâ‡∏ô 3-5 ‡πÄ‡∏ó‡πà‡∏≤
- üì± Mobile UX ‡∏î‡∏µ‡∏Ç‡∏∂‡πâ‡∏ô‡∏°‡∏≤‡∏Å
- üéÆ ‡πÄ‡∏û‡∏¥‡πà‡∏° Engagement ‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏ô‡∏∏‡∏Å
- üìä ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ‡∏î‡∏µ‡∏Ç‡∏∂‡πâ‡∏ô

**Next Steps:**
1. ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏≤‡∏Å Performance Optimization (Priority 1)
2. ‡πÄ‡∏û‡∏¥‡πà‡∏° Leaderboard + Achievements (Priority 2)
3. ‡∏ó‡∏≥ PWA ‡πÄ‡∏û‡∏∑‡πà‡∏≠ Offline support (Priority 3)

---

**‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠:** 28 ‡∏ï‡∏∏‡∏•‡∏≤‡∏Ñ‡∏° 2025  
**‡∏ú‡∏π‡πâ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå:** AI Assistant  
**‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô:** 1.0

